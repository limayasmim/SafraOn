<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafraOn</title>
  <link rel="stylesheet" href="css/fazendas.css">
  <link rel="shortcut icon" type="image/x-icon" href="/imagem/logo.png" style="border-radius: 50px;">
</head>

<body>
  <img src="/imagem/logo.png" alt="">
  <aside>
    <li>Início</li>
    <li>Talhões</li>
    <li>Dicas</li>
    <li>Sobre Nós</li>
  </aside>
  <main>
    <h1>Fazendas</h1>
    <article>
      <section>
        <input type="text" id="pesquisa" placeholder="Pesquisa" required>
      </section>


      <h4>Fazenda-1 <button class="toggle-button" onclick="toggleTalhoes(1)">▼</button></h4>
      <div id="talhoes-1" style="display: none;">
        <p>Local</p>
        <h5>Talhão 1</h5>
        <h5>Talhão 2</h5>
        <h5>Talhão 3</h5>
        <h5>Talhão 4</h5>
        <button>Adicionar talhão +</button>
      </div>

      <h4>Fazenda-2 <button class="toggle-button" onclick="toggleTalhoes(2)">▼</button></h4>
      <div id="talhoes-2" style="display: none;">
        <p>Local</p>
        <h5>Talhão 1</h5>
        <h5>Talhão 2</h5>
        <h5>Talhão 3</h5>
        <h5>Talhão 4</h5>
        <button>Adicionar talhão +</button>
      </div>

      <h4>Fazenda-3 <button class="toggle-button" onclick="toggleTalhoes(3)">▼</button></h4>
      <div id="talhoes-3" style="display: none;">
        <p>Local</p>
        <h5>Talhão 1</h5>
        <h5>Talhão 2</h5>
        <h5>Talhão 3</h5>
        <h5>Talhão 4</h5>
        <button>Adicionar talhão +</button>
      </div>

      <h4>Fazenda-4 <button class="toggle-button" onclick="toggleTalhoes(4)">▼</button></h4>
      <div id="talhoes-4" style="display: none;">
        <p>Local</p>
        <h5>Talhão 1</h5>
        <h5>Talhão 2</h5>
        <h5>Talhão 3</h5>
        <h5>Talhão 4</h5>
        <button>Adicionar talhão +</button>
      </div>

      <button id="adicionarBtn">Adicionar fazenda +</button>
    </article>

    <section style="width: 20%; margin-left: 27%; margin-top: -4.3%; display: none;" id="inputFazenda">
      <input type="text" placeholder="Nome da fazenda" required>
    </section>
  </main>

  <script>
function toggleTalhoes(num) {
  const selecionado = document.getElementById("talhoes-" + num);
  const botao = document.querySelectorAll(".toggle-button")[num - 1];
  const isOpen = selecionado.style.display === "block";

  // Fecha todos os containers de talhão
  document.querySelectorAll('div[id^="talhoes-"]').forEach(container => {
    container.style.display = "none";
  });
  
  // Reseta todos os botões para ▼
  document.querySelectorAll(".toggle-button").forEach(btn => {
    btn.innerHTML = "▼";
  });

  // Abre somente se não estava aberto
  if (!isOpen) {
    selecionado.style.display = "block";
    botao.innerHTML = "▲";
  }
}

// Adiciona evento ao botão de adicionar fazenda
document.getElementById('adicionarBtn').addEventListener('click', function() {
  const inputSection = document.getElementById('inputFazenda');
  inputSection.style.display = inputSection.style.display === 'none' ? 'block' : 'none';
});

// Fecha os containers de talhão ao clicar fora deles
document.addEventListener('click', function(event) {
  const isToggleButton = event.target.matches('.toggle-button');
  const isInsideTalhoes = event.target.closest('div[id^="talhoes-"]');
  
  // Se não clicou em um botão toggle nem dentro de um container de talhões
  if (!isToggleButton && !isInsideTalhoes) {
    document.querySelectorAll('div').forEach(container => {
      container.style.display = "none";
    });
    document.querySelectorAll(".toggle-button").forEach(btn => {
      btn.innerHTML = "▼";
    });
  }
});
  </script>
</body>

</html>